---
title: 应用层
date: 2025-10-12 18:47:42
categories: cn
---

# DNS

## DNS是什么

- 将域名转换为IP地址的分布式系统

## 为什么使用分布式系统

- 单点故障 一台服务器宕机，全网瘫痪
- 性能瓶颈 单台服务器难以承受全球海量查询
- 远距离延迟 集中式服务器无法就近服务全球用户
- 维护困难 频繁更新 高成本维护

## 域名的层级结构

从右到左层级递增，如`www.server.com`

- 根域名：`.`
- 顶级域名：`.com`
- 二级域名：`server.com`
- 三级域名：`www.server.com`

## DNS 解析过程

1. 浏览器缓存 → 2. 本地 hosts 文件 → 3. 本地 DNS 服务器 → 4. 根 DNS 服务器 → 5. 顶级域名服务器 → 6. 权威 DNS 服务器 → 7. 返回 IP 并缓存 → 8. 浏览器发起连接

## 递归查询 vs 迭代查询

| 类型     | 发起者             | 特点                                 | 适用场景     |
| :------- | :----------------- | :----------------------------------- | :----------- |
| 递归查询 | 客户端（如浏览器） | 客户端只发一次请求，等待最终结果     | 用户端       |
| 迭代查询 | 本地 DNS 服务器    | 服务器返回下一级地址，客户端继续查询 | DNS 服务器之 |

# HTTP

## 报文结构

### 请求报文

| 部分   | 内容                     | 示例                       |
| :----- | :----------------------- | :------------------------- |
| 请求行 | `METHOD URL HTTP版本`    | `GET /index.html HTTP/1.1` |
| 请求头 | 客户端信息、缓存、身份等 | `Host`, `User-Agent`       |
| 请求体 | 提交的数据（POST/PUT）   | `username=admin`           |

### 响应报文

| 部分   | 内容                       | 示例                   |
| :----- | :------------------------- | :--------------------- |
| 状态行 | `HTTP版本 状态码 状态信息` | `HTTP/1.1 200 OK`      |
| 响应头 | 服务器信息、缓存策略等     | `Server`, `Set-Cookie` |
| 响应体 | 返回的资源（HTML/JSON等）  | `<html>...</html>`     |

## HTTP 请求方法

| 方法    | 作用           | 幂等性 | 安全性 | 特点                              |
| :------ | :------------- | :----- | :----- | :-------------------------------- |
| GET     | 获取资源       | ✅      | ✅      | 数据在 URL 中，有长度限制         |
| POST    | 提交数据       | ❌      | ❌      | 数据在请求体中，适合敏感/大量数据 |
| PUT     | 更新整个资源   | ✅      | ❌      | 替换整个资源                      |
| DELETE  | 删除资源       | ✅      | ❌      | 删除指定资源                      |
| PATCH   | 部分更新资源   | ❌      | ❌      | 部分修改，幂等性取决于实现        |
| HEAD    | 获取响应头     | ✅      | ✅      | 类似 GET，无响应体                |
| OPTIONS | 查询支持的方法 | ✅      | ✅      | 用于 CORS 预检请求                |

> 📌 **幂等**：多次执行效果相同（如 GET、PUT、DELETE）
> 📌 **安全**：不修改服务器资源（如 GET、HEAD）
