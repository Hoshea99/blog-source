---
title: 数据链路层
date: 2025-10-12 10:25:19
categories: cn
---

# MAC地址

## 作用

1. 唯一标识：全球唯一的硬件地址，在局域网内标识网络设备
2. 帧寻址：在数据链路层，通过源MAC和目标MAC地址，实现了同一网段内设备直接通信
3. 帧过滤：网卡根据收到的帧的目标MAC地址，决定是否接收并上传给上层处理

## 格式

48位，前24为由IEEE分配给厂商，后24位厂商自行分配

# ARP协议

- 全称：地址解析协议
- 作用：根据IP地址查询对应的MAC地址
- 工作原理：
  1. 当主机A需要与同一局域网内主机B通信，A会查询本地ARP缓存表
  2. 如果没找到B的MAC地址，A会向局域网广播一个ARP请求包，内容为询问IP地址为x.x.x.x的MAC地址
  3. 局域网内所有主机都会收到这个请求，但是IP地址对应的主机会给主机A单播一个ARP回复包，包含自己的MAC地址
  4. 主机A收到回复后，将IP-MAC的映射关系存入ARP缓存

# 交换机

交换机是数据链路层设备，核心工作是基于MAC地址转发数据帧。

1. 学习：交换机有一个MAC地址表，记录端口与连接在该端口上设备的MAC地址映射关系
2. 转发，过滤：当交换机收到一个数据帧，则查看其目标MAC地址，在MAC地址表中查找对应的端口
   - 如果找到了，单播将帧从那个端口转发
   - 如果未找到，则广播所有其他窗口
3. 环路避免：在复杂网络中，使用STP协议来防止广播风暴

